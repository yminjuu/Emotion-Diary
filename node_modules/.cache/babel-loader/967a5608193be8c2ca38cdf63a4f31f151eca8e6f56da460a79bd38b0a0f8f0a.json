{"ast":null,"code":"import\"./App.css\";import{BrowserRouter,Routes,Route}from\"react-router-dom\";import React,{useReducer,useState,useRef,useEffect}from\"react\";import Home from\"./pages/Home\";import New from\"./pages/New\";import Edit from\"./pages/Edit\";import Diary from\"./pages/Diary\";//components\nimport MyButton from\"./components/MyButton\";import MyHeader from\"./components/MyHeader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const reducer=(state,action)=>{let newState=[];switch(action.type){case\"INIT\":{return action.data;}case\"CREATE\":{const newItem={...action.data};newState=[newItem,...state];break;}case\"REMOVE\":{newState=state.filter(it=>it.id!==action.targetId);break;}case\"EDIT\":{newState=state.map(it=>it.id===action.data.id?{...action.data}:it);break;}default:return state;}localStorage.setItem(\"diary\",JSON.stringify(newState));return newState;};// state, method에 대해 \"각각\" context를 만들어준다\nexport const DiaryStateContext=/*#__PURE__*/React.createContext();export const DiaryDispatchContext=/*#__PURE__*/React.createContext();function App(){const[data,dispatch]=useReducer(reducer,[]);//일기 데이터 관리: data\nconst dataId=useRef(0);//local Storage에서 데이터 가져오기\nuseEffect(()=>{const localData=localStorage.getItem(\"diary\");if(localData){const diaryList=JSON.parse(localData).sort((a,b)=>parseInt(b.id)-parseInt(a.id)//내림차순으로 정렬된다.\n);dataId.current=parseInt(diaryList[0].id)+1;dispatch({type:\"INIT\",data:diaryList});}else{alert(\"다이어리를 채워보세요!\");}},[]);//data state 관리\nconst onCreate=_ref=>{let{date,content,emotion}=_ref;dispatch({type:\"CREATE\",data:{id:dataId.current,date:date,content,emotion}});dataId.current+=1;};const onRemove=targetId=>{dispatch({type:\"REMOVE\",targetId});};const onEdit=(targetId,date,content,emotion)=>{dispatch({type:\"EDIT\",data:{id:targetId,date:new Date(date).getTime(),content,emotion}});};return/*#__PURE__*/_jsx(DiaryStateContext.Provider,{value:data,children:/*#__PURE__*/_jsx(DiaryDispatchContext.Provider,{value:{onCreate,onEdit,onRemove},children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/new\",element:/*#__PURE__*/_jsx(New,{})}),/*#__PURE__*/_jsx(Route,{path:\"/edit/:id\",element:/*#__PURE__*/_jsx(Edit,{})}),/*#__PURE__*/_jsx(Route,{path:\"/diary/:id\",element:/*#__PURE__*/_jsx(Diary,{})})]})})})})});}export default App;","map":{"version":3,"names":["BrowserRouter","Routes","Route","React","useReducer","useState","useRef","useEffect","Home","New","Edit","Diary","MyButton","MyHeader","jsx","_jsx","jsxs","_jsxs","reducer","state","action","newState","type","data","newItem","filter","it","id","targetId","map","localStorage","setItem","JSON","stringify","DiaryStateContext","createContext","DiaryDispatchContext","App","dispatch","dataId","localData","getItem","diaryList","parse","sort","a","b","parseInt","current","alert","onCreate","_ref","date","content","emotion","onRemove","onEdit","Date","getTime","Provider","value","children","className","path","element"],"sources":["/Users/yminjuu/Documents/개인 플젝/React.js Project/EmotionDiary/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport React, { useReducer, useState, useRef, useEffect } from \"react\";\n\nimport Home from \"./pages/Home\";\nimport New from \"./pages/New\";\nimport Edit from \"./pages/Edit\";\nimport Diary from \"./pages/Diary\";\n\n//components\nimport MyButton from \"./components/MyButton\";\nimport MyHeader from \"./components/MyHeader\";\n\nconst reducer = (state, action) => {\n  let newState = [];\n\n  switch (action.type) {\n    case \"INIT\": {\n      return action.data;\n    }\n    case \"CREATE\": {\n      const newItem = { ...action.data };\n      newState = [newItem, ...state];\n      break;\n    }\n    case \"REMOVE\": {\n      newState = state.filter((it) => it.id !== action.targetId);\n      break;\n    }\n    case \"EDIT\": {\n      newState = state.map((it) =>\n        it.id === action.data.id ? { ...action.data } : it\n      );\n      break;\n    }\n    default:\n      return state;\n  }\n  localStorage.setItem(\"diary\", JSON.stringify(newState));\n  return newState;\n};\n\n// state, method에 대해 \"각각\" context를 만들어준다\nexport const DiaryStateContext = React.createContext();\nexport const DiaryDispatchContext = React.createContext();\n\nfunction App() {\n  const [data, dispatch] = useReducer(reducer, []); //일기 데이터 관리: data\n\n  const dataId = useRef(0);\n\n  //local Storage에서 데이터 가져오기\n  useEffect(() => {\n    const localData = localStorage.getItem(\"diary\");\n    if (localData) {\n      const diaryList = JSON.parse(localData).sort(\n        (a, b) => parseInt(b.id) - parseInt(a.id) //내림차순으로 정렬된다.\n      );\n      dataId.current = parseInt(diaryList[0].id) + 1;\n      dispatch({ type: \"INIT\", data: diaryList });\n    } else {\n      alert(\"다이어리를 채워보세요!\");\n    }\n  }, []);\n\n  //data state 관리\n  const onCreate = ({ date, content, emotion }) => {\n    dispatch({\n      type: \"CREATE\",\n      data: {\n        id: dataId.current,\n        date: date,\n        content,\n        emotion,\n      },\n    });\n    dataId.current += 1;\n  };\n\n  const onRemove = (targetId) => {\n    dispatch({\n      type: \"REMOVE\",\n      targetId,\n    });\n  };\n\n  const onEdit = (targetId, date, content, emotion) => {\n    dispatch({\n      type: \"EDIT\",\n      data: {\n        id: targetId,\n        date: new Date(date).getTime(),\n        content,\n        emotion,\n      },\n    });\n  };\n\n  return (\n    <DiaryStateContext.Provider value={data}>\n      <DiaryDispatchContext.Provider value={{ onCreate, onEdit, onRemove }}>\n        <BrowserRouter>\n          <div className=\"App\">\n            <Routes>\n              <Route path=\"/\" element={<Home></Home>}></Route>\n              <Route path=\"/new\" element={<New></New>}></Route>\n              <Route path=\"/edit/:id\" element={<Edit></Edit>}></Route>\n              <Route path=\"/diary/:id\" element={<Diary></Diary>}></Route>\n            </Routes>\n          </div>\n        </BrowserRouter>\n      </DiaryDispatchContext.Provider>\n    </DiaryStateContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}